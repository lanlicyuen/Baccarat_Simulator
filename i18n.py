# 多语言配置 / Multi-language Configuration
import streamlit as st

LANGUAGES = {
    "en": {
        "name": "English",
        "code": "en",
        "translations": {
            "baccarat_simulator": "Baccarat Simulator",
            "baccarat_simulator_playback": "Baccarat Simulator - Playback",
            "login_subtitle": "✨ Please enter access password to continue ✨",
            "password": "Password",
            "password_placeholder": "Enter password...",
            "login_button": "🔐 Enter System",
            "login_system": "🚪 Logout",
            "mode": "Mode",
            "playback_mode": "Playback Mode",
            "fast_mode": "Fast Mode",
            "language": "Language",
            "game_settings": "🎰 Game Settings",
            "initial_bankroll": "Initial Bankroll",
            "commission_rate": "Commission Rate (%)",
            "bet_amount": "Bet Amount",
            "max_hands": "Max Hands",
            "rebate_rate": "Rebate Rate (%)",
            "strategy_settings": "🎯 Strategy Settings",
            "betting_strategy": "Betting Strategy",
            "random_strategy": "Random",
            "follow_banker": "Follow Banker",
            "follow_player": "Follow Player",
            "pattern_recognition": "Pattern Recognition",
            "bankroll_management": "💰 Bankroll Management",
            "enable_bankroll_mgmt": "Enable Bankroll Management",
            "stop_loss": "Stop Loss",
            "stop_win": "Stop Win",
            "min_bet": "Min Bet",
            "max_bet": "Max Bet",
            "loss_progression": "📉 Loss Progression Settings",
            "loss_increase_pct": "Loss Increase (%)",
            "loss_decrease_pct": "Loss Decrease (%)", 
            "loss_start_threshold": "Start After N Losses",
            "loss_win_mode": "After Win Mode",
            "win_progression": "🎯 Win Progression Settings",
            "win_increase_pct": "Win Increase (%)",
            "win_decrease_pct": "Win Decrease (%)", 
            "win_start_threshold": "Start After N Wins",
            "win_loss_mode": "After Loss Mode",
            "start": "▶️ Start",
            "pause": "⏸️ Pause", 
            "resume": "▶️ Resume",
            "stop": "⏹️ Stop",
            "reset": "🔄 Reset",
            "save_settings": "💾 Save Settings",
            "load_settings": "📂 Load Settings",
            "download_data": "📊 Download Data",
            "current_hand": "Current Hand",
            "hand": "Hand",
            "result": "Result",
            "banker": "Banker",
            "player": "Player",
            "tie": "Tie",
            "bet": "Bet",
            "payout": "Payout",
            "balance": "Balance",
            "profit_loss": "Profit/Loss",
            "win_rate": "Win Rate",
            "total_bets": "Total Bets",
            "total_wins": "Total Wins",
            "total_losses": "Total Losses",
            "max_consecutive_wins": "Max Consecutive Wins",
            "max_consecutive_losses": "Max Consecutive Losses",
            "average_bet": "Average Bet",
            "total_commission": "Total Commission",
            "net_profit": "Net Profit",
            "roi": "ROI (%)",
            "sharpe_ratio": "Sharpe Ratio",
            "max_drawdown": "Max Drawdown",
            "volatility": "Volatility",
            "settings_saved": "✅ Settings saved successfully!",
            "settings_loaded": "✅ Settings loaded successfully!",
            "settings_load_error": "❌ Settings load error",
            "data_download": "📊 Data Download",
            "download_complete": "✅ Download Complete!",
            "download_failed": "❌ Download Failed!",
            "confirmation": "Confirmation",
            "error": "Error",
            "success": "Success",
            "loading": "Loading...",
            "completed": "Completed",
            "flip_opposite_wait": "Flip & Wait (Smart Switch)",
            "always_banker": "Always Banker",
            "always_player": "Always Player", 
            "alternate": "Alternate Banker/Player",
            "random": "Random Strategy",
            "random_seed": "Random Seed",
            "penetration_threshold": "Penetration Threshold",
            "total_hands": "Total Hands",
            "number_of_decks": "Number of Decks",
            "speed": "Speed (sec)",
            "auto_scroll": "Auto Scroll",
            "next": "Next",
            "skip_5": "Skip 5",
            "skip_to_report": "Skip to Report",
            "rebate": "Rebate"
        }
    },
    "zh_cn": {
        "name": "简体中文",
        "code": "zh_cn",
        "translations": {
            "baccarat_simulator": "百家乐模拟器",
            "baccarat_simulator_playback": "百家乐模拟器 - 回放模式",
            "login_subtitle": "✨ 请输入访问密码以继续 ✨",
            "password": "密码",
            "password_placeholder": "请输入密码...",
            "login_button": "🔐 进入系统",
            "login_system": "🚪 退出登录",
            "mode": "模式",
            "playback_mode": "回放模式",
            "fast_mode": "极速模式",
            "language": "语言",
            "game_settings": "🎰 游戏设置",
            "initial_bankroll": "初始资金",
            "commission_rate": "佣金率 (%)",
            "bet_amount": "下注金额",
            "max_hands": "最大局数",
            "rebate_rate": "返水率 (%)",
            "strategy_settings": "🎯 策略设置",
            "betting_strategy": "下注策略",
            "random_strategy": "随机",
            "follow_banker": "跟庄",
            "follow_player": "跟闲",
            "pattern_recognition": "路子识别",
            "bankroll_management": "💰 资金管理",
            "enable_bankroll_mgmt": "启用资金管理",
            "stop_loss": "止损",
            "stop_win": "止盈",
            "min_bet": "最小下注",
            "max_bet": "最大下注",
            "loss_progression": "📉 连败加注设置",
            "loss_increase_pct": "败后加注 (%)",
            "loss_decrease_pct": "败后减注 (%)",
            "loss_start_threshold": "连败N次后开始",
            "loss_win_mode": "胜后模式",
            "win_progression": "🎯 连胜加注设置",
            "win_increase_pct": "胜后加注 (%)",
            "win_decrease_pct": "胜后减注 (%)",
            "win_start_threshold": "连胜N次后开始",
            "win_loss_mode": "败后模式",
            "start": "▶️ 开始",
            "pause": "⏸️ 暂停",
            "resume": "▶️ 继续",
            "stop": "⏹️ 停止",
            "reset": "🔄 重置",
            "save_settings": "💾 保存设置",
            "load_settings": "📂 加载设置",
            "download_data": "📊 下载数据",
            "current_hand": "当前局详情",
            "hand": "局数",
            "result": "结果",
            "banker": "庄",
            "player": "闲",
            "tie": "和",
            "bet": "下注",
            "payout": "赔付",
            "balance": "余额",
            "profit_loss": "盈亏",
            "win_rate": "胜率",
            "total_bets": "总下注",
            "total_wins": "总胜局",
            "total_losses": "总败局",
            "max_consecutive_wins": "最大连胜",
            "max_consecutive_losses": "最大连败",
            "average_bet": "平均下注",
            "total_commission": "总佣金",
            "net_profit": "净利润",
            "roi": "投资回报率 (%)",
            "sharpe_ratio": "夏普比率",
            "max_drawdown": "最大回撤",
            "volatility": "波动率",
            "settings_saved": "✅ 设置保存成功！",
            "settings_loaded": "✅ 设置加载成功！",
            "settings_load_error": "❌ 设置加载错误",
            "data_download": "📊 数据下载",
            "download_complete": "✅ 下载完成！",
            "download_failed": "❌ 下载失败！",
            "confirmation": "确认",
            "error": "错误",
            "success": "成功",
            "loading": "加载中...",
            "completed": "已完成",
            "flip_opposite_wait": "智能切换等待",
            "always_banker": "永远押庄",
            "always_player": "永远押闲",
            "alternate": "庄闲交替",
            "random": "随机策略",
            "random_seed": "随机种子",
            "penetration_threshold": "切牌点",
            "total_hands": "总局数",
            "number_of_decks": "牌组数量",
            "speed": "速度 (秒)",
            "auto_scroll": "自动滚动",
            "next": "下一步",
            "skip_5": "跳过5局",
            "skip_to_report": "跳至报告",
            "rebate": "返水"
        }
    },
    "zh_tw": {
        "name": "繁體中文",
        "code": "zh_tw",
        "translations": {
            "baccarat_simulator": "百家樂模擬器",
            "baccarat_simulator_playback": "百家樂模擬器 - 回放模式",
            "login_subtitle": "✨ 請輸入訪問密碼以繼續 ✨",
            "password": "密碼",
            "password_placeholder": "請輸入密碼...",
            "login_button": "🔐 進入系統",
            "login_system": "🚪 退出登錄",
            "mode": "模式",
            "playback_mode": "回放模式",
            "fast_mode": "極速模式",
            "language": "語言",
            "game_settings": "🎰 遊戲設置",
            "initial_bankroll": "初始資金",
            "commission_rate": "佣金率 (%)",
            "bet_amount": "下注金額",
            "max_hands": "最大局數",
            "rebate_rate": "返水率 (%)",
            "strategy_settings": "🎯 策略設置",
            "betting_strategy": "下注策略",
            "random_strategy": "隨機",
            "follow_banker": "跟莊",
            "follow_player": "跟閒",
            "pattern_recognition": "路子識別",
            "bankroll_management": "💰 資金管理",
            "enable_bankroll_mgmt": "啟用資金管理",
            "stop_loss": "止損",
            "stop_win": "止盈",
            "min_bet": "最小下注",
            "max_bet": "最大下注",
            "loss_progression": "📉 連敗加注設置",
            "loss_increase_pct": "敗後加注 (%)",
            "loss_decrease_pct": "敗後減注 (%)",
            "loss_start_threshold": "連敗N次後開始",
            "loss_win_mode": "勝後模式",
            "win_progression": "🎯 連勝加注設置",
            "win_increase_pct": "勝後加注 (%)",
            "win_decrease_pct": "勝後減注 (%)",
            "win_start_threshold": "連勝N次後開始",
            "win_loss_mode": "敗後模式",
            "start": "▶️ 開始",
            "pause": "⏸️ 暫停",
            "resume": "▶️ 繼續",
            "stop": "⏹️ 停止",
            "reset": "🔄 重置",
            "save_settings": "💾 保存設置",
            "load_settings": "📂 加載設置",
            "download_data": "📊 下載數據",
            "current_hand": "當前局詳情",
            "hand": "局數",
            "result": "結果",
            "banker": "莊",
            "player": "閒",
            "tie": "和",
            "bet": "下注",
            "payout": "賠付",
            "balance": "餘額",
            "profit_loss": "盈虧",
            "win_rate": "勝率",
            "total_bets": "總下注",
            "total_wins": "總勝局",
            "total_losses": "總敗局",
            "max_consecutive_wins": "最大連勝",
            "max_consecutive_losses": "最大連敗",
            "average_bet": "平均下注",
            "total_commission": "總佣金",
            "net_profit": "淨利潤",
            "roi": "投資回報率 (%)",
            "sharpe_ratio": "夏普比率",
            "max_drawdown": "最大回撤",
            "volatility": "波動率",
            "settings_saved": "✅ 設置保存成功！",
            "settings_loaded": "✅ 設置加載成功！",
            "settings_load_error": "❌ 設置加載錯誤",
            "data_download": "📊 數據下載",
            "download_complete": "✅ 下載完成！",
            "download_failed": "❌ 下載失敗！",
            "confirmation": "確認",
            "error": "錯誤",
            "success": "成功",
            "loading": "加載中...",
            "completed": "已完成",
            "flip_opposite_wait": "智能切換等待",
            "always_banker": "永遠押莊",
            "always_player": "永遠押閒",
            "alternate": "莊閒交替",
            "random": "隨機策略",
            "random_seed": "隨機種子",
            "penetration_threshold": "切牌點",
            "total_hands": "總局數",
            "number_of_decks": "牌組數量",
            "speed": "速度 (秒)",
            "auto_scroll": "自動滾動",
            "next": "下一步",
            "skip_5": "跳過5局",
            "skip_to_report": "跳至報告",
            "rebate": "返水"
        }
    },
    "ja": {
        "name": "日本語",
        "code": "ja",
        "translations": {
            "baccarat_simulator": "バカラシミュレーター",
            "baccarat_simulator_playback": "バカラシミュレーター - 再生モード",
            "login_subtitle": "✨ アクセスパスワードを入力して続行してください ✨",
            "password": "パスワード",
            "password_placeholder": "パスワードを入力...",
            "login_button": "🔐 システムに入る",
            "login_system": "🚪 ログアウト",
            "mode": "モード",
            "playback_mode": "再生モード",
            "fast_mode": "高速モード",
            "language": "言語",
            "game_settings": "🎰 ゲーム設定",
            "initial_bankroll": "初期資金",
            "commission_rate": "コミッション率 (%)",
            "bet_amount": "ベット金額",
            "max_hands": "最大ハンド数",
            "rebate_rate": "リベート率 (%)",
            "strategy_settings": "🎯 戦略設定",
            "betting_strategy": "ベット戦略",
            "random_strategy": "ランダム",
            "follow_banker": "バンカーフォロー",
            "follow_player": "プレイヤーフォロー",
            "pattern_recognition": "パターン認識",
            "bankroll_management": "💰 資金管理",
            "enable_bankroll_mgmt": "資金管理を有効にする",
            "stop_loss": "損切り",
            "stop_win": "利確",
            "min_bet": "最小ベット",
            "max_bet": "最大ベット",
            "loss_progression": "📉 連敗時設定",
            "loss_increase_pct": "負け後増額 (%)",
            "loss_decrease_pct": "負け後減額 (%)",
            "loss_start_threshold": "N連敗後に開始",
            "loss_win_mode": "勝利後モード",
            "win_progression": "🎯 連勝時設定",
            "win_increase_pct": "勝利後増額 (%)",
            "win_decrease_pct": "勝利後減額 (%)",
            "win_start_threshold": "N連勝後に開始",
            "win_loss_mode": "敗北後モード",
            "start": "▶️ 開始",
            "pause": "⏸️ 一時停止",
            "resume": "▶️ 再開",
            "stop": "⏹️ 停止",
            "reset": "🔄 リセット",
            "save_settings": "💾 設定保存",
            "load_settings": "📂 設定読込",
            "download_data": "📊 データダウンロード",
            "current_hand": "現在のハンド詳細",
            "hand": "ハンド数",
            "result": "結果",
            "banker": "バンカー",
            "player": "プレイヤー",
            "tie": "タイ",
            "bet": "ベット",
            "payout": "配当",
            "balance": "残高",
            "profit_loss": "損益",
            "win_rate": "勝率",
            "total_bets": "総ベット",
            "total_wins": "総勝利",
            "total_losses": "総敗北",
            "max_consecutive_wins": "最大連勝",
            "max_consecutive_losses": "最大連敗",
            "average_bet": "平均ベット",
            "total_commission": "総コミッション",
            "net_profit": "純利益",
            "roi": "投資収益率 (%)",
            "sharpe_ratio": "シャープレシオ",
            "max_drawdown": "最大ドローダウン",
            "volatility": "ボラティリティ",
            "settings_saved": "✅ 設定が保存されました！",
            "settings_loaded": "✅ 設定が読み込まれました！",
            "settings_load_error": "❌ 設定読み込みエラー",
            "data_download": "📊 データダウンロード",
            "download_complete": "✅ ダウンロード完了！",
            "download_failed": "❌ ダウンロード失敗！",
            "confirmation": "確認",
            "error": "エラー",
            "success": "成功",
            "loading": "読み込み中...",
            "completed": "完了",
            "flip_opposite_wait": "スマート切り替え待機",
            "always_banker": "常にバンカー",
            "always_player": "常にプレイヤー",
            "alternate": "バンカー/プレイヤー交互",
            "random": "ランダム戦略",
            "random_seed": "ランダムシード",
            "penetration_threshold": "ペネトレーション",
            "total_hands": "総ハンド数",
            "number_of_decks": "デッキ数",
            "speed": "速度 (秒)",
            "auto_scroll": "自動スクロール",
            "next": "次へ",
            "skip_5": "5回スキップ",
            "skip_to_report": "レポートへ",
            "rebate": "リベート"
        }
    },
    "ko": {
        "name": "한국어",
        "code": "ko",
        "translations": {
            "baccarat_simulator": "바카라 시뮬레이터",
            "baccarat_simulator_playback": "바카라 시뮬레이터 - 재생 모드",
            "login_subtitle": "✨ 계속하려면 액세스 비밀번호를 입력하세요 ✨",
            "password": "비밀번호",
            "password_placeholder": "비밀번호를 입력하세요...",
            "login_button": "🔐 시스템 진입",
            "login_system": "🚪 로그아웃",
            "mode": "모드",
            "playback_mode": "재생 모드",
            "fast_mode": "고속 모드",
            "language": "언어",
            "game_settings": "🎰 게임 설정",
            "initial_bankroll": "초기 자금",
            "commission_rate": "수수료율 (%)",
            "bet_amount": "베팅 금액",
            "max_hands": "최대 핸드 수",
            "rebate_rate": "리베이트율 (%)",
            "strategy_settings": "🎯 전략 설정",
            "betting_strategy": "베팅 전략",
            "random_strategy": "랜덤",
            "follow_banker": "뱅커 따라가기",
            "follow_player": "플레이어 따라가기",
            "pattern_recognition": "패턴 인식",
            "bankroll_management": "💰 자금 관리",
            "enable_bankroll_mgmt": "자금 관리 활성화",
            "stop_loss": "손절",
            "stop_win": "익절",
            "min_bet": "최소 베팅",
            "max_bet": "최대 베팅",
            "loss_progression": "📉 연패 시 설정",
            "loss_increase_pct": "패배 후 증액 (%)",
            "loss_decrease_pct": "패배 후 감액 (%)",
            "loss_start_threshold": "N연패 후 시작",
            "loss_win_mode": "승리 후 모드",
            "win_progression": "🎯 연승 시 설정",
            "win_increase_pct": "승리 후 증액 (%)",
            "win_decrease_pct": "승리 후 감액 (%)",
            "win_start_threshold": "N연승 후 시작",
            "win_loss_mode": "패배 후 모드",
            "start": "▶️ 시작",
            "pause": "⏸️ 일시정지",
            "resume": "▶️ 재개",
            "stop": "⏹️ 정지",
            "reset": "🔄 리셋",
            "save_settings": "💾 설정 저장",
            "load_settings": "📂 설정 불러오기",
            "download_data": "📊 데이터 다운로드",
            "current_hand": "현재 핸드 상세",
            "hand": "핸드 수",
            "result": "결과",
            "banker": "뱅커",
            "player": "플레이어",
            "tie": "타이",
            "bet": "베팅",
            "payout": "배당",
            "balance": "잔액",
            "profit_loss": "손익",
            "win_rate": "승률",
            "total_bets": "총 베팅",
            "total_wins": "총 승리",
            "total_losses": "총 패배",
            "max_consecutive_wins": "최대 연승",
            "max_consecutive_losses": "최대 연패",
            "average_bet": "평균 베팅",
            "total_commission": "총 수수료",
            "net_profit": "순이익",
            "roi": "투자수익률 (%)",
            "sharpe_ratio": "샤프 비율",
            "max_drawdown": "최대 손실폭",
            "volatility": "변동성",
            "settings_saved": "✅ 설정이 저장되었습니다!",
            "settings_loaded": "✅ 설정이 로드되었습니다!",
            "settings_load_error": "❌ 설정 로드 오류",
            "data_download": "📊 데이터 다운로드",
            "download_complete": "✅ 다운로드 완료!",
            "download_failed": "❌ 다운로드 실패!",
            "confirmation": "확인",
            "error": "오류",
            "success": "성공",
            "loading": "로딩 중...",
            "completed": "완료",
            "flip_opposite_wait": "스마트 전환 대기",
            "always_banker": "항상 뱅커",
            "always_player": "항상 플레이어",
            "alternate": "뱅커/플레이어 교대",
            "random": "랜덤 전략",
            "random_seed": "랜덤 시드",
            "penetration_threshold": "침투 임계값",
            "total_hands": "총 핸드 수",
            "number_of_decks": "덱 수",
            "speed": "속도 (초)",
            "auto_scroll": "자동 스크롤",
            "next": "다음",
            "skip_5": "5개 건너뛰기",
            "skip_to_report": "보고서로 이동",
            "rebate": "리베이트"
        }
    }
}

def get_language():
    return st.session_state.get('language', 'en')

def set_language(lang_code):
    st.session_state['language'] = lang_code

def t(key, lang_code=None):
    if lang_code is None:
        lang_code = get_language()
    
    if lang_code in LANGUAGES and key in LANGUAGES[lang_code]['translations']:
        return LANGUAGES[lang_code]['translations'][key]
    
    if 'en' in LANGUAGES and key in LANGUAGES['en']['translations']:
        return LANGUAGES['en']['translations'][key]
    
    return key

def render_language_selector():
    current_lang = get_language()
    
    # 根据当前语言显示语言名称
    language_options = {}
    for lang_code, lang_info in LANGUAGES.items():
        language_options[lang_info['name']] = lang_code
    
    # 创建语言标签，在登录页面使用双语显示
    label_text = f"🌍 {t('language')}"
    
    selected_display = st.selectbox(
        label_text,
        options=list(language_options.keys()),
        index=list(language_options.values()).index(current_lang),
        key="language_selector"
    )
    
    if selected_display:
        selected_lang = language_options[selected_display]
        if selected_lang != current_lang:
            set_language(selected_lang)
            st.rerun()
